API
===

.. py:module:: fcache
.. class:: Cache(cachename, appname[, appauthor=None])

    Take *cachename* and *appname*, then create a cache file. If a matching cache file was found, a new one is not created.
    
    *appauthor* is used on Windows to determine the appropriate cache directory. If not provided, it defaults to *appname*. See :mod:`appdirs`'s documentation for more information.
    
    :param string cachename: a unique name for the cache.
    :param string appname: the name of the application the cache is created for.
    :param appauthor: the name of the application's author -- if ``None``, defaults to *appname*.
    :type appauthor: string or None

    .. attribute:: cachename
        
        The cache's name, as passed to the :class:`~fcache.Cache` constructor method.

    .. attribute:: cachedir

        The cache's parent directory, as determined by :meth:`appdirs.user_cache_dir`.

    .. attribute:: filename

        The cache's filename. It's formed by passing :attr:`~fcache.Cache.cachename` to :meth:`hashlib.md5`.
     
    .. method:: set(key, value[, timeout=None])

        Store data in the cache. The data, *value*, is stored under the name, *key*, in the cache. The data must be `picklable <http://docs.python.org/2.7/library/pickle.html#what-can-be-pickled-and-unpickled>`_. Optionally, the data can expire after *timeout* seconds have passed.

        :param string key: the name given to the data.
        :param value: the data to be stored.
        :param timeout: how long in seconds the data should be considered valid -- if ``None``, defaults to forever.
        :type timeout: integer, long, float, or None
        :raises pickle.PicklingError: an `unpicklable object <http://docs.python.org/2.7/library/pickle.html#what-can-be-pickled-and-unpickled>`_ was passed.
        :raises IOError: the cache file does not exist or cannot be read/written to.

    .. method:: get(key)

        Get data from the cache. All data stored under the name, *key*, is returned. If the data is expired, ``None`` is returned.

        :param string key: the name of the data to fetch.
        :returns: the requested data or ``None`` if the requested data has expired.
        :raises KeyError: *key* was not found.
        :raises IOError: the cache file does not exist or cannot be read.
        :raises pickle.UnpicklingError: there was a problem unpickling an object.

    .. method:: remove(key)

        Remove data from the cache. All data stored under *key* is deleted from the cache.

        :param string key: the name of the data to remove.
        :raises KeyError: *key* was not found.
        :raises IOError: the cache file does not exist or cannot be read/written to.

    .. method:: flush()

        Clear all data from the cache. This removes all key/value pairs from the cache.

        :raises IOError: the cache file does not exist or could not be written to.

    .. method:: delete()

        Delete the cache file.

        On Windows, if the file is in use by another application, an exception is raised. See :func:`os.remove` for more information.

        :raises OSError: the cache file does not exist.
